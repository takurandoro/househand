
 RUN  v3.2.4 /Users/takura/Desktop/househand-19931048

stdout | src/tests/supabaseClient.test.ts > getUserMetadata > returns nulls for missing user
getUserMetadata input: [1mnull[22m
No user or metadata, returning null values

stdout | src/tests/supabaseClient.test.ts > getUserMetadata > returns nulls for missing metadata
getUserMetadata input: { id: [32m'1'[39m, raw_user_meta_data: [1mnull[22m }
No user or metadata, returning null values

stdout | src/tests/supabaseClient.test.ts > getUserMetadata > returns transformed metadata
getUserMetadata input: {
  id: [32m'1'[39m,
  raw_user_meta_data: { full_name: [32m'A'[39m, avatar_url: [32m'u'[39m, location: [32m'L'[39m }
}
Raw metadata: { full_name: [32m'A'[39m, avatar_url: [32m'u'[39m, location: [32m'L'[39m }
Transformed metadata: { id: [32m'1'[39m, full_name: [32m'A'[39m, avatar_url: [32m'u'[39m, location: [32m'L'[39m }

 âœ“ src/tests/supabaseClient.test.ts > getStorageUrl > returns null for null path 35ms
 âœ“ src/tests/supabaseClient.test.ts > getStorageUrl > returns DiceBear url as is 15ms
 âœ“ src/tests/supabaseClient.test.ts > getStorageUrl > returns http url as is 18ms
 Ã— src/tests/supabaseClient.test.ts > getStorageUrl > handles /storage/v1/ path 83ms
   â†’ expected 'https://phbdfpsherbapwzjfohq.supabaseâ€¦' to be 'https://supabase.io/storage/v1/abc' // Object.is equality
 Ã— src/tests/supabaseClient.test.ts > getStorageUrl > handles / relative path 8ms
   â†’ expected 'https://phbdfpsherbapwzjfohq.supabaseâ€¦' to be 'https://supabase.io/storage/v1/objectâ€¦' // Object.is equality
 Ã— src/tests/supabaseClient.test.ts > getStorageUrl > handles bucket path 8ms
   â†’ expected 'https://phbdfpsherbapwzjfohq.supabaseâ€¦' to be 'https://supabase.io/storage/v1/objectâ€¦' // Object.is equality
 âœ“ src/tests/supabaseClient.test.ts > getUserMetadata > returns nulls for missing user 12ms
 âœ“ src/tests/supabaseClient.test.ts > getUserMetadata > returns nulls for missing metadata 2ms
 âœ“ src/tests/supabaseClient.test.ts > getUserMetadata > returns transformed metadata 11ms
 âœ“ src/tests/supabaseClient.test.ts > checkConnectivity > returns true if fetch ok 47ms
 âœ“ src/tests/supabaseClient.test.ts > checkConnectivity > returns false if fetch not ok 5ms
 âœ“ src/tests/supabaseClient.test.ts > checkConnectivity > returns false on fetch error 10ms
 âœ“ src/tests/supabaseClient.test.ts > retryOperation > returns result if operation succeeds 22ms
 âœ“ src/tests/supabaseClient.test.ts > retryOperation > retries on failure and succeeds 40ms
 âœ“ src/tests/supabaseClient.test.ts > retryOperation > throws after max retries 69ms
 âœ“ src/tests/supabaseClient.test.ts > retryOperation > throws if offline 14ms
 âœ“ src/tests/useBids.test.tsx > useBids hooks > fetches bids by task 539ms
 Ã— src/tests/useBids.test.tsx > useBids hooks > handles error when fetching bids by task 352ms
   â†’ expected true to be false // Object.is equality
 âœ“ src/tests/useBids.test.tsx > useBids hooks > fetches bids by helper 167ms
 âœ“ src/tests/useTasks.test.tsx > useTasks hooks > fetches tasks successfully 1241ms
 Ã— src/tests/useBids.test.tsx > useBids hooks > handles error when fetching bids by helper 65ms
   â†’ expected true to be false // Object.is equality
 âœ“ src/tests/useBids.test.tsx > useBids hooks > handles bid mutation (success) 64ms
 âœ“ src/tests/useBids.test.tsx > useBids hooks > handles error on bid mutation 36ms
 Ã— src/tests/useTasks.test.tsx > useTasks hooks > handles error when fetching tasks 179ms
   â†’ expected true to be false // Object.is equality
 âœ“ src/tests/useClientAnalytics.test.tsx > useClientAnalytics > returns analytics data for a user 1142ms
 âœ“ src/tests/useTasks.test.tsx > useTasks hooks > fetches a single task 122ms
 Ã— src/tests/useClientAnalytics.test.tsx > useClientAnalytics > handles supabase error 191ms
   â†’ Cannot read properties of null (reading 'message')
 Ã— src/tests/useTasks.test.tsx > useTasks hooks > handles error when fetching a single task 101ms
   â†’ expected true to be false // Object.is equality
 âœ“ src/tests/useTasks.test.tsx > useTasks hooks > updates task status (mutation success) 81ms
 Ã— src/tests/supabaseClient.test.ts > createTask > creates and fetches task 3128ms
   â†’ promise rejected "Error: No internet connection" instead of resolving
 âœ“ src/tests/useTasks.test.tsx > useTasks hooks > handles error on updateTaskStatus 72ms
 âœ“ src/tests/useTasks.test.tsx > useTasks hooks > creates a task (mutation success) 17ms
 âœ“ src/tests/useTasks.test.tsx > useTasks hooks > handles error on createTask 54ms
 Ã— src/tests/supabaseClient.test.ts > createTask > throws on insert error 3296ms
   â†’ expected Error: No internet connection to deeply equal { message: 'fail' }
 âœ“ src/tests/FindWork.test.tsx > FindWork Page > renders the hero section 3809ms
 Ã— src/tests/supabaseClient.test.ts > createTask > throws on fetch error 3213ms
   â†’ expected Error: No internet connection to deeply equal { message: 'fail' }
 âœ“ src/tests/CreateTaskDialog.test.tsx > CreateTaskDialog > renders without crashing 4655ms
 Ã— src/tests/HelperDashboard.test.tsx > HelperDashboard > renders without crashing 7916ms
   â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 Ã— src/tests/useClientDetails.test.tsx > useClientDetails > fetches client details successfully 388ms
   â†’ Cannot find module '@/integrations/supabase/client'
Require stack:
- /Users/takura/Desktop/househand-19931048/src/tests/useClientDetails.test.tsx
 Ã— src/tests/useClientDetails.test.tsx > useClientDetails > handles error when fetching client details 2ms
   â†’ Cannot find module '@/integrations/supabase/client'
Require stack:
- /Users/takura/Desktop/househand-19931048/src/tests/useClientDetails.test.tsx
 âœ“ src/tests/useClientDetails.test.tsx > useClientDetails > resets state on dialog close 519ms
 âœ“ src/tests/data.test.ts > checkTaskData > returns correct counts 200ms
 âœ“ src/tests/data.test.ts > checkTaskData > throws on bids error 14ms
 âœ“ src/tests/data.test.ts > checkTaskData > throws on completed error 1ms
 Ã— src/tests/loading.test.ts > loadTasksForView > loads available tasks for helper 289ms
   â†’ Cannot read properties of undefined (reading 'in')
 âœ“ src/tests/loading.test.ts > loadTasksForView > throws on error 150ms
 âœ“ src/tests/queries.test.ts > loadTasksForView (queries) > loads client tasks 40ms
 Ã— src/tests/queries.test.ts > loadTasksForView (queries) > loads helper available tasks 546ms
   â†’ query.ilike is not a function
 Ã— src/tests/queries.test.ts > loadTasksForView (queries) > filters my_bids after fetch 141ms
   â†’ query.neq is not a function
 Ã— src/tests/queries.test.ts > loadTasksForView (queries) > throws on error 79ms
   â†’ expected TypeError: query.eq(...).order is not a fâ€¦ to deeply equal { message: 'error' }
 Ã— src/tests/GetHelp.test.tsx > GetHelp Page > renders the hero section 5467ms
   â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 Ã— src/tests/BidDialog.test.tsx > BidDialog > renders without crashing 6079ms
   â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 Ã— src/tests/Index.test.tsx > Index Page > renders the hero title 6072ms
   â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 âœ“ src/tests/ClientDashboard.test.tsx > ClientDashboard > renders loading spinner 4910ms
 âœ“ src/tests/WithdrawalDialog.test.tsx > WithdrawalDialog > renders without crashing 5203ms
stdout | src/tests/useNotifications.test.tsx > useNotifications > fetches notifications
Successfully subscribed to notifications

stdout | src/tests/useNotifications.test.tsx > useNotifications > fetches notifications
Successfully subscribed to notifications

stdout | src/tests/useNotifications.test.tsx > useNotifications > marks a notification as read
Successfully subscribed to notifications

 âœ“ src/tests/useNotifications.test.tsx > useNotifications > fetches notifications 1678ms
stdout | src/tests/useNotifications.test.tsx > useNotifications > marks all notifications as read
Successfully subscribed to notifications

stdout | src/tests/useNotifications.test.tsx > useNotifications > marks all notifications as read
Successfully subscribed to notifications

 âœ“ src/tests/useNotifications.test.tsx > useNotifications > marks a notification as read 123ms
stdout | src/tests/useNotifications.test.tsx > useNotifications > updates notification preferences
Successfully subscribed to notifications

stdout | src/tests/useNotifications.test.tsx > useNotifications > updates notification preferences
Successfully subscribed to notifications

 âœ“ src/tests/useNotifications.test.tsx > useNotifications > marks all notifications as read 99ms
stdout | src/tests/useNotifications.test.tsx > useNotifications > handles error on markAsRead
Successfully subscribed to notifications

stdout | src/tests/useNotifications.test.tsx > useNotifications > handles error on markAsRead
Successfully subscribed to notifications

 âœ“ src/tests/useNotifications.test.tsx > useNotifications > updates notification preferences 279ms
stdout | src/tests/useNotifications.test.tsx > useNotifications > handles error on markAsRead
Successfully subscribed to notifications

stdout | src/tests/useNotifications.test.tsx > useNotifications > handles error on markAllAsRead
Successfully subscribed to notifications

 âœ“ src/tests/useNotifications.test.tsx > useNotifications > handles error on markAsRead 454ms
stdout | src/tests/useNotifications.test.tsx > useNotifications > handles error on updatePreferences
Successfully subscribed to notifications

stdout | src/tests/useNotifications.test.tsx > useNotifications > handles error on updatePreferences
Successfully subscribed to notifications

 âœ“ src/tests/useNotifications.test.tsx > useNotifications > handles error on markAllAsRead 196ms
stdout | src/tests/useNotifications.test.tsx
Successfully subscribed to notifications

 âœ“ src/tests/useNotifications.test.tsx > useNotifications > handles error on updatePreferences 121ms
 âœ“ src/tests/About.test.tsx > About Page > renders the About HouseHand heading 3039ms
 âœ“ src/tests/About.test.tsx > About Page > renders the Our Mission section 800ms
 âœ“ src/tests/TaskFilters.test.tsx > TaskFilters > renders without crashing 3147ms
 âœ“ src/tests/ToastProvider.test.tsx > Toaster > renders without crashing 2680ms
 âœ“ src/tests/TaskReviewDialog.test.tsx > TaskReviewDialog > renders without crashing 4858ms
 âœ“ src/tests/NotificationBell.test.tsx > NotificationBell > renders without crashing 652ms
 âœ“ src/tests/Signup.test.tsx > Signup Page > renders the signup form 1800ms
 âœ“ src/tests/NotFound.test.tsx > NotFound Page > renders the not found message 3718ms
 âœ“ src/tests/HelperSidebar.test.tsx > HelperSidebar > renders without crashing 2593ms
 âœ“ src/tests/AnalyticsOverview.test.tsx > AnalyticsOverview > renders without crashing 2470ms
 âœ“ src/tests/EarningsDisplay.test.tsx > EarningsDisplay > renders without crashing 3387ms
 âœ“ src/tests/Login.test.tsx > Login Page > renders the login form 1334ms
 âœ“ src/tests/ResponsiveHeader.test.tsx > ResponsiveHeader > renders without crashing 1282ms
 âœ“ src/tests/AnalyticsCharts.test.tsx > AnalyticsCharts > renders without crashing 1455ms
 âœ“ src/tests/Dashboard.test.tsx > Dashboard Page > renders loading state 662ms
 âœ“ src/tests/HelperCard.test.tsx > HelperCard > renders helper name, location, and bio 3178ms
 âœ“ src/tests/use-mobile.test.tsx > useIsMobile > returns true if window width is less than 768 895ms
 âœ“ src/tests/use-mobile.test.tsx > useIsMobile > returns false if window width is 768 or more 24ms
 âœ“ src/tests/card.test.tsx > Card > renders children 1906ms
 âœ“ src/tests/handlers.test.ts > handleSupabaseError > returns ValidationError for unique_violation 62ms
 âœ“ src/tests/handlers.test.ts > handleSupabaseError > returns ValidationError for foreign_key_violation 3ms
 âœ“ src/tests/handlers.test.ts > handleSupabaseError > returns ValidationError for undefined_column 3ms
 âœ“ src/tests/handlers.test.ts > handleSupabaseError > returns ValidationError for invalid_text_representation 5ms
 âœ“ src/tests/handlers.test.ts > handleSupabaseError > returns ValidationError for not_null_violation 95ms
 âœ“ src/tests/handlers.test.ts > handleSupabaseError > returns AppError for unknown code 187ms
 âœ“ src/tests/handlers.test.ts > handleAuthError > returns AuthenticationError for JWT error 3ms
 âœ“ src/tests/handlers.test.ts > handleAuthError > returns ValidationError for credentials error 1ms
 âœ“ src/tests/handlers.test.ts > handleAuthError > returns AppError for other errors 34ms
 âœ“ src/tests/handlers.test.ts > handleApiError > returns the same AppError if passed 8ms
 âœ“ src/tests/handlers.test.ts > handleApiError > returns NotFoundError for not found message 22ms
 âœ“ src/tests/handlers.test.ts > handleApiError > returns AuthenticationError for permission message 112ms
 âœ“ src/tests/handlers.test.ts > handleApiError > returns ValidationError for validation message 5ms
 âœ“ src/tests/handlers.test.ts > handleApiError > returns AppError for generic Error 191ms
 âœ“ src/tests/handlers.test.ts > handleApiError > returns AppError for unknown error type 92ms
 âœ“ src/tests/MobileNavigation.test.tsx > MobileNavigation > renders without crashing 1444ms
 âœ“ src/tests/BidManagement.test.tsx > BidManagement > renders without crashing 1350ms
 âœ“ src/tests/use-toast.test.ts > toast > calls sonner.toast for default variant 63ms
 âœ“ src/tests/use-toast.test.ts > toast > calls sonner.toast.error for destructive variant 3ms
 âœ“ src/tests/use-toast.test.ts > toast > calls sonner.toast.success for success variant 10ms
 âœ“ src/tests/use-toast.test.ts > toast > calls sonner.toast.warning for warning variant 55ms
 âœ“ src/tests/use-toast.test.ts > toast > calls sonner.toast.info for info variant 6ms
 âœ“ src/tests/use-toast.test.ts > useToast > returns toast, dismiss, and dismissAll 53ms
 âœ“ src/tests/TaskList.test.tsx > TaskList > renders without crashing 1159ms
 âœ“ src/tests/TaskPaymentDialog.test.tsx > TaskPaymentDialog > renders nothing if no task is provided 598ms
 âœ“ src/tests/HelperTaskList.test.tsx > TaskList (Helper) > renders without crashing 966ms

 Test Files  22 failed | 30 passed (52)
      Tests  21 failed | 86 passed (107)
     Errors  4 errors
   Start at  16:14:11
   Duration  258.29s (transform 53.74s, setup 166.32s, collect 412.68s, tests 115.62s, environment 645.79s, prepare 109.99s)

